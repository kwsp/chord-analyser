var app=function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function r(t){t.forEach(n)}function o(t){return"function"==typeof t}function i(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function a(t,n){t.appendChild(n)}function s(t,n,e){t.insertBefore(n,e||null)}function l(t){t.parentNode.removeChild(t)}function u(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}function c(t){return document.createElement(t)}function h(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function f(t){return document.createTextNode(t)}function d(){return f(" ")}function g(t,n,e,r){return t.addEventListener(n,e,r),()=>t.removeEventListener(n,e,r)}function p(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function m(t,n){n=""+n,t.wholeText!==n&&(t.data=n)}let y,b;function v(){if(void 0===y){y=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(t){y=!0}}return y}function w(t,n){"static"===getComputedStyle(t).position&&(t.style.position="relative");const e=c("iframe");e.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),e.setAttribute("aria-hidden","true"),e.tabIndex=-1;const r=v();let o;return r?(e.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",o=g(window,"message",(t=>{t.source===e.contentWindow&&n()}))):(e.src="about:blank",e.onload=()=>{o=g(e.contentWindow,"resize",n)}),a(t,e),()=>{(r||o&&e.contentWindow)&&o(),l(e)}}function x(t){b=t}const M=[],$=[],k=[],N=[],A=Promise.resolve();let C=!1;function E(t){k.push(t)}let S=!1;const z=new Set;function q(){if(!S){S=!0;do{for(let t=0;t<M.length;t+=1){const n=M[t];x(n),F(n.$$)}for(x(null),M.length=0;$.length;)$.pop()();for(let t=0;t<k.length;t+=1){const n=k[t];z.has(n)||(z.add(n),n())}k.length=0}while(M.length);for(;N.length;)N.pop()();C=!1,S=!1,z.clear()}}function F(t){if(null!==t.fragment){t.update(),r(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(E)}}const j=new Set;function D(t,n){t&&t.i&&(j.delete(t),t.i(n))}function _(t,n,e,r){if(t&&t.o){if(j.has(t))return;j.add(t),undefined.c.push((()=>{j.delete(t),r&&(e&&t.d(1),r())})),t.o(n)}}function L(t){t&&t.c()}function T(t,e,i,a){const{fragment:s,on_mount:l,on_destroy:u,after_update:c}=t.$$;s&&s.m(e,i),a||E((()=>{const e=l.map(n).filter(o);u?u.push(...e):r(e),t.$$.on_mount=[]})),c.forEach(E)}function H(t,n){const e=t.$$;null!==e.fragment&&(r(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function R(t,n){-1===t.$$.dirty[0]&&(M.push(t),C||(C=!0,A.then(q)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function P(n,o,i,a,s,u,c,h=[-1]){const f=b;x(n);const d=n.$$={fragment:null,ctx:null,props:u,update:t,not_equal:s,bound:e(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:o.context||[]),callbacks:e(),dirty:h,skip_bound:!1,root:o.target||f.$$.root};c&&c(d.root);let g=!1;if(d.ctx=i?i(n,o.props||{},((t,e,...r)=>{const o=r.length?r[0]:e;return d.ctx&&s(d.ctx[t],d.ctx[t]=o)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](o),g&&R(n,t)),e})):[],d.update(),g=!0,r(d.before_update),d.fragment=!!a&&a(d.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);d.fragment&&d.fragment.l(t),t.forEach(l)}else d.fragment&&d.fragment.c();o.intro&&D(n.$$.fragment),T(n,o.target,o.anchor,o.customElement),q()}x(f)}class G{$destroy(){H(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function I(t,n){return null==t||null==n?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function U(t){let n=t,e=t;function r(t,n,r,o){for(null==r&&(r=0),null==o&&(o=t.length);r<o;){const i=r+o>>>1;e(t[i],n)<0?r=i+1:o=i}return r}return 1===t.length&&(n=(n,e)=>t(n)-e,e=function(t){return(n,e)=>I(t(n),e)}(t)),{left:r,center:function(t,e,o,i){null==o&&(o=0),null==i&&(i=t.length);const a=r(t,e,o,i-1);return a>o&&n(t[a-1],e)>-n(t[a],e)?a-1:a},right:function(t,n,r,o){for(null==r&&(r=0),null==o&&(o=t.length);r<o;){const i=r+o>>>1;e(t[i],n)>0?o=i:r=i+1}return r}}}const B=U(I).right;U((function(t){return null===t?NaN:+t})).center;var O=B,W=Math.sqrt(50),X=Math.sqrt(10),Y=Math.sqrt(2);function V(t,n,e){var r=(n-t)/Math.max(0,e),o=Math.floor(Math.log(r)/Math.LN10),i=r/Math.pow(10,o);return o>=0?(i>=W?10:i>=X?5:i>=Y?2:1)*Math.pow(10,o):-Math.pow(10,-o)/(i>=W?10:i>=X?5:i>=Y?2:1)}function Z(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t)}return this}function K(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function J(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function Q(){}var tt=.7,nt=1/tt,et="\\s*([+-]?\\d+)\\s*",rt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ot="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",it=/^#([0-9a-f]{3,8})$/,at=new RegExp("^rgb\\("+[et,et,et]+"\\)$"),st=new RegExp("^rgb\\("+[ot,ot,ot]+"\\)$"),lt=new RegExp("^rgba\\("+[et,et,et,rt]+"\\)$"),ut=new RegExp("^rgba\\("+[ot,ot,ot,rt]+"\\)$"),ct=new RegExp("^hsl\\("+[rt,ot,ot]+"\\)$"),ht=new RegExp("^hsla\\("+[rt,ot,ot,rt]+"\\)$"),ft={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function dt(){return this.rgb().formatHex()}function gt(){return this.rgb().formatRgb()}function pt(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=it.exec(t))?(e=n[1].length,n=parseInt(n[1],16),6===e?mt(n):3===e?new wt(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):8===e?yt(n>>24&255,n>>16&255,n>>8&255,(255&n)/255):4===e?yt(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|240&n,((15&n)<<4|15&n)/255):null):(n=at.exec(t))?new wt(n[1],n[2],n[3],1):(n=st.exec(t))?new wt(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=lt.exec(t))?yt(n[1],n[2],n[3],n[4]):(n=ut.exec(t))?yt(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=ct.exec(t))?kt(n[1],n[2]/100,n[3]/100,1):(n=ht.exec(t))?kt(n[1],n[2]/100,n[3]/100,n[4]):ft.hasOwnProperty(t)?mt(ft[t]):"transparent"===t?new wt(NaN,NaN,NaN,0):null}function mt(t){return new wt(t>>16&255,t>>8&255,255&t,1)}function yt(t,n,e,r){return r<=0&&(t=n=e=NaN),new wt(t,n,e,r)}function bt(t){return t instanceof Q||(t=pt(t)),t?new wt((t=t.rgb()).r,t.g,t.b,t.opacity):new wt}function vt(t,n,e,r){return 1===arguments.length?bt(t):new wt(t,n,e,null==r?1:r)}function wt(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}function xt(){return"#"+$t(this.r)+$t(this.g)+$t(this.b)}function Mt(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function $t(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function kt(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new At(t,n,e,r)}function Nt(t){if(t instanceof At)return new At(t.h,t.s,t.l,t.opacity);if(t instanceof Q||(t=pt(t)),!t)return new At;if(t instanceof At)return t;var n=(t=t.rgb()).r/255,e=t.g/255,r=t.b/255,o=Math.min(n,e,r),i=Math.max(n,e,r),a=NaN,s=i-o,l=(i+o)/2;return s?(a=n===i?(e-r)/s+6*(e<r):e===i?(r-n)/s+2:(n-e)/s+4,s/=l<.5?i+o:2-i-o,a*=60):s=l>0&&l<1?0:a,new At(a,s,l,t.opacity)}function At(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function Ct(t,n,e){return 255*(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)}K(Q,pt,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:dt,formatHex:dt,formatHsl:function(){return Nt(this).formatHsl()},formatRgb:gt,toString:gt}),K(wt,vt,J(Q,{brighter:function(t){return t=null==t?nt:Math.pow(nt,t),new wt(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?tt:Math.pow(tt,t),new wt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:xt,formatHex:xt,formatRgb:Mt,toString:Mt})),K(At,(function(t,n,e,r){return 1===arguments.length?Nt(t):new At(t,n,e,null==r?1:r)}),J(Q,{brighter:function(t){return t=null==t?nt:Math.pow(nt,t),new At(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?tt:Math.pow(tt,t),new At(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,o=2*e-r;return new wt(Ct(t>=240?t-240:t+120,o,r),Ct(t,o,r),Ct(t<120?t+240:t-120,o,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var Et=t=>()=>t;function St(t){return 1==(t=+t)?zt:function(n,e){return e-n?function(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}(n,e,t):Et(isNaN(n)?e:n)}}function zt(t,n){var e=n-t;return e?function(t,n){return function(e){return t+e*n}}(t,e):Et(isNaN(t)?n:t)}var qt=function t(n){var e=St(n);function r(t,n){var r=e((t=vt(t)).r,(n=vt(n)).r),o=e(t.g,n.g),i=e(t.b,n.b),a=zt(t.opacity,n.opacity);return function(n){return t.r=r(n),t.g=o(n),t.b=i(n),t.opacity=a(n),t+""}}return r.gamma=t,r}(1);function Ft(t,n){n||(n=[]);var e,r=t?Math.min(n.length,t.length):0,o=n.slice();return function(i){for(e=0;e<r;++e)o[e]=t[e]*(1-i)+n[e]*i;return o}}function jt(t,n){var e,r=n?n.length:0,o=t?Math.min(r,t.length):0,i=new Array(o),a=new Array(r);for(e=0;e<o;++e)i[e]=Pt(t[e],n[e]);for(;e<r;++e)a[e]=n[e];return function(t){for(e=0;e<o;++e)a[e]=i[e](t);return a}}function Dt(t,n){var e=new Date;return t=+t,n=+n,function(r){return e.setTime(t*(1-r)+n*r),e}}function _t(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}function Lt(t,n){var e,r={},o={};for(e in null!==t&&"object"==typeof t||(t={}),null!==n&&"object"==typeof n||(n={}),n)e in t?r[e]=Pt(t[e],n[e]):o[e]=n[e];return function(t){for(e in r)o[e]=r[e](t);return o}}var Tt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ht=new RegExp(Tt.source,"g");function Rt(t,n){var e,r,o,i=Tt.lastIndex=Ht.lastIndex=0,a=-1,s=[],l=[];for(t+="",n+="";(e=Tt.exec(t))&&(r=Ht.exec(n));)(o=r.index)>i&&(o=n.slice(i,o),s[a]?s[a]+=o:s[++a]=o),(e=e[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:_t(e,r)})),i=Ht.lastIndex;return i<n.length&&(o=n.slice(i),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?function(t){return function(n){return t(n)+""}}(l[0].x):function(t){return function(){return t}}(n):(n=l.length,function(t){for(var e,r=0;r<n;++r)s[(e=l[r]).i]=e.x(t);return s.join("")})}function Pt(t,n){var e,r,o=typeof n;return null==n||"boolean"===o?Et(n):("number"===o?_t:"string"===o?(e=pt(n))?(n=e,qt):Rt:n instanceof pt?qt:n instanceof Date?Dt:(r=n,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(n)?jt:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?Lt:_t:Ft))(t,n)}function Gt(t,n){return t=+t,n=+n,function(e){return Math.round(t*(1-e)+n*e)}}function It(t){return+t}var Ut=[0,1];function Bt(t){return t}function Ot(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:(e=isNaN(n)?NaN:.5,function(){return e});var e}function Wt(t,n,e){var r=t[0],o=t[1],i=n[0],a=n[1];return o<r?(r=Ot(o,r),i=e(a,i)):(r=Ot(r,o),i=e(i,a)),function(t){return i(r(t))}}function Xt(t,n,e){var r=Math.min(t.length,n.length)-1,o=new Array(r),i=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++a<r;)o[a]=Ot(t[a],t[a+1]),i[a]=e(n[a],n[a+1]);return function(n){var e=O(t,n,1,r)-1;return i[e](o[e](n))}}function Yt(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Vt(){var t,n,e,r,o,i,a=Ut,s=Ut,l=Pt,u=Bt;function c(){var t,n,e,l=Math.min(a.length,s.length);return u!==Bt&&(t=a[0],n=a[l-1],t>n&&(e=t,t=n,n=e),u=function(e){return Math.max(t,Math.min(n,e))}),r=l>2?Xt:Wt,o=i=null,h}function h(n){return null==n||isNaN(n=+n)?e:(o||(o=r(a.map(t),s,l)))(t(u(n)))}return h.invert=function(e){return u(n((i||(i=r(s,a.map(t),_t)))(e)))},h.domain=function(t){return arguments.length?(a=Array.from(t,It),c()):a.slice()},h.range=function(t){return arguments.length?(s=Array.from(t),c()):s.slice()},h.rangeRound=function(t){return s=Array.from(t),l=Gt,c()},h.clamp=function(t){return arguments.length?(u=!!t||Bt,c()):u!==Bt},h.interpolate=function(t){return arguments.length?(l=t,c()):l},h.unknown=function(t){return arguments.length?(e=t,h):e},function(e,r){return t=e,n=r,c()}}function Zt(){return Vt()(Bt,Bt)}function Kt(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]}function Jt(t){return(t=Kt(Math.abs(t)))?t[1]:NaN}var Qt,tn=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function nn(t){if(!(n=tn.exec(t)))throw new Error("invalid format: "+t);var n;return new en({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}function en(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function rn(t,n){var e=Kt(t,n);if(!e)return t+"";var r=e[0],o=e[1];return o<0?"0."+new Array(-o).join("0")+r:r.length>o+1?r.slice(0,o+1)+"."+r.slice(o+1):r+new Array(o-r.length+2).join("0")}nn.prototype=en.prototype,en.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var on={"%":(t,n)=>(100*t).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>rn(100*t,n),r:rn,s:function(t,n){var e=Kt(t,n);if(!e)return t+"";var r=e[0],o=e[1],i=o-(Qt=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,a=r.length;return i===a?r:i>a?r+new Array(i-a+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+Kt(t,Math.max(0,n+i-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function an(t){return t}var sn,ln,un,cn=Array.prototype.map,hn=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function fn(t){var n,e,r=void 0===t.grouping||void 0===t.thousands?an:(n=cn.call(t.grouping,Number),e=t.thousands+"",function(t,r){for(var o=t.length,i=[],a=0,s=n[0],l=0;o>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),i.push(t.substring(o-=s,o+s)),!((l+=s+1)>r));)s=n[a=(a+1)%n.length];return i.reverse().join(e)}),o=void 0===t.currency?"":t.currency[0]+"",i=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?an:function(t){return function(n){return n.replace(/[0-9]/g,(function(n){return t[+n]}))}}(cn.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",u=void 0===t.minus?"−":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function h(t){var n=(t=nn(t)).fill,e=t.align,h=t.sign,f=t.symbol,d=t.zero,g=t.width,p=t.comma,m=t.precision,y=t.trim,b=t.type;"n"===b?(p=!0,b="g"):on[b]||(void 0===m&&(m=12),y=!0,b="g"),(d||"0"===n&&"="===e)&&(d=!0,n="0",e="=");var v="$"===f?o:"#"===f&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",w="$"===f?i:/[%p]/.test(b)?l:"",x=on[b],M=/[defgprs%]/.test(b);function $(t){var o,i,l,f=v,$=w;if("c"===b)$=x(t)+$,t="";else{var k=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:x(Math.abs(t),m),y&&(t=function(t){t:for(var n,e=t.length,r=1,o=-1;r<e;++r)switch(t[r]){case".":o=n=r;break;case"0":0===o&&(o=r),n=r;break;default:if(!+t[r])break t;o>0&&(o=0)}return o>0?t.slice(0,o)+t.slice(n+1):t}(t)),k&&0==+t&&"+"!==h&&(k=!1),f=(k?"("===h?h:u:"-"===h||"("===h?"":h)+f,$=("s"===b?hn[8+Qt/3]:"")+$+(k&&"("===h?")":""),M)for(o=-1,i=t.length;++o<i;)if(48>(l=t.charCodeAt(o))||l>57){$=(46===l?a+t.slice(o+1):t.slice(o))+$,t=t.slice(0,o);break}}p&&!d&&(t=r(t,1/0));var N=f.length+t.length+$.length,A=N<g?new Array(g-N+1).join(n):"";switch(p&&d&&(t=r(A+t,A.length?g-$.length:1/0),A=""),e){case"<":t=f+t+$+A;break;case"=":t=f+A+t+$;break;case"^":t=A.slice(0,N=A.length>>1)+f+t+$+A.slice(N);break;default:t=A+f+t+$}return s(t)}return m=void 0===m?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),$.toString=function(){return t+""},$}return{format:h,formatPrefix:function(t,n){var e=h(((t=nn(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Jt(n)/3))),o=Math.pow(10,-r),i=hn[8+r/3];return function(t){return e(o*t)+i}}}}function dn(t,n,e,r){var o,i=function(t,n,e){var r=Math.abs(n-t)/Math.max(0,e),o=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),i=r/o;return i>=W?o*=10:i>=X?o*=5:i>=Y&&(o*=2),n<t?-o:o}(t,n,e);switch((r=nn(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(n));return null!=r.precision||isNaN(o=function(t,n){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Jt(n)/3)))-Jt(Math.abs(t)))}(i,a))||(r.precision=o),un(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(o=function(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,Jt(n)-Jt(t))+1}(i,Math.max(Math.abs(t),Math.abs(n))))||(r.precision=o-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(o=function(t){return Math.max(0,-Jt(Math.abs(t)))}(i))||(r.precision=o-2*("%"===r.type))}return ln(r)}function gn(t){var n=t.domain;return t.ticks=function(t){var e=n();return function(t,n,e){var r,o,i,a,s=-1;if(e=+e,(t=+t)==(n=+n)&&e>0)return[t];if((r=n<t)&&(o=t,t=n,n=o),0===(a=V(t,n,e))||!isFinite(a))return[];if(a>0){let e=Math.round(t/a),r=Math.round(n/a);for(e*a<t&&++e,r*a>n&&--r,i=new Array(o=r-e+1);++s<o;)i[s]=(e+s)*a}else{a=-a;let e=Math.round(t*a),r=Math.round(n*a);for(e/a<t&&++e,r/a>n&&--r,i=new Array(o=r-e+1);++s<o;)i[s]=(e+s)/a}return r&&i.reverse(),i}(e[0],e[e.length-1],null==t?10:t)},t.tickFormat=function(t,e){var r=n();return dn(r[0],r[r.length-1],null==t?10:t,e)},t.nice=function(e){null==e&&(e=10);var r,o,i=n(),a=0,s=i.length-1,l=i[a],u=i[s],c=10;for(u<l&&(o=l,l=u,u=o,o=a,a=s,s=o);c-- >0;){if((o=V(l,u,e))===r)return i[a]=l,i[s]=u,n(i);if(o>0)l=Math.floor(l/o)*o,u=Math.ceil(u/o)*o;else{if(!(o<0))break;l=Math.ceil(l*o)/o,u=Math.floor(u*o)/o}r=o}return t},t}function pn(){var t=Zt();return t.copy=function(){return Yt(t,pn())},Z.apply(t,arguments),gn(t)}function mn(t,n,e){const r=t.slice();return r[15]=n[e],r[17]=e,r}function yn(t,n,e){const r=t.slice();return r[15]=n[e],r}function bn(t){let n,e,r,o,i,u,c=t[15]+"";return{c(){n=h("g"),e=h("line"),r=h("text"),o=f(c),p(e,"x2","100%"),p(e,"class","svelte-6g7uvx"),p(r,"y","-4"),p(r,"class","svelte-6g7uvx"),p(n,"class",i="tick tick-"+t[15]+" svelte-6g7uvx"),p(n,"transform",u="translate(0, "+(t[2](t[15])-t[8].bottom)+")")},m(t,i){s(t,n,i),a(n,e),a(n,r),a(r,o)},p(t,e){4&e&&u!==(u="translate(0, "+(t[2](t[15])-t[8].bottom)+")")&&p(n,"transform",u)},d(t){t&&l(n)}}}function vn(t){let n,e,r,o,i,u,c,d,g,m=t[15]+"",y=t[17]===t[7].length-1?" Hz":"";return{c(){n=h("g"),e=h("line"),i=h("text"),u=f(m),c=f(y),p(e,"y1",r="-"+t[1]),p(e,"y2",o="-"+t[8].bottom),p(e,"x1","0"),p(e,"x2","0"),p(e,"class","svelte-6g7uvx"),p(i,"y","-2"),p(i,"class","svelte-6g7uvx"),p(n,"class",d="tick tick-"+t[15]+" svelte-6g7uvx"),p(n,"transform",g="translate("+t[3](t[15])+","+t[1]+")")},m(t,r){s(t,n,r),a(n,e),a(n,i),a(i,u),a(i,c)},p(t,o){2&o&&r!==(r="-"+t[1])&&p(e,"y1",r),10&o&&g!==(g="translate("+t[3](t[15])+","+t[1]+")")&&p(n,"transform",g)},d(t){t&&l(n)}}}function wn(n){let e,r,o,i,f,g,m,y,b,v=n[6],x=[];for(let t=0;t<v.length;t+=1)x[t]=bn(yn(n,v,t));let M=n[7],$=[];for(let t=0;t<M.length;t+=1)$[t]=vn(mn(n,M,t));return{c(){e=c("h3"),e.textContent="Spectrum Visualiser",r=d(),o=c("div"),i=h("svg"),f=h("g");for(let t=0;t<x.length;t+=1)x[t].c();g=h("g");for(let t=0;t<$.length;t+=1)$[t].c();m=h("path"),y=h("path"),p(e,"class","svelte-6g7uvx"),p(f,"class","axis y-axis"),p(f,"transform","translate(0, "+n[8].top+")"),p(g,"class","axis x-axis svelte-6g7uvx"),p(m,"class","path-area svelte-6g7uvx"),p(m,"d",n[5]),p(y,"class","path-line svelte-6g7uvx"),p(y,"d",n[4]),p(i,"class","svelte-6g7uvx"),p(o,"class","chart svelte-6g7uvx"),E((()=>n[13].call(o)))},m(t,l){s(t,e,l),s(t,r,l),s(t,o,l),a(o,i),a(i,f);for(let t=0;t<x.length;t+=1)x[t].m(f,null);a(i,g);for(let t=0;t<$.length;t+=1)$[t].m(g,null);a(i,m),a(i,y),b=w(o,n[13].bind(o))},p(t,[n]){if(324&n){let e;for(v=t[6],e=0;e<v.length;e+=1){const r=yn(t,v,e);x[e]?x[e].p(r,n):(x[e]=bn(r),x[e].c(),x[e].m(f,null))}for(;e<x.length;e+=1)x[e].d(1);x.length=v.length}if(394&n){let e;for(M=t[7],e=0;e<M.length;e+=1){const r=mn(t,M,e);$[e]?$[e].p(r,n):($[e]=vn(r),$[e].c(),$[e].m(g,null))}for(;e<$.length;e+=1)$[e].d(1);$.length=M.length}32&n&&p(m,"d",t[5]),16&n&&p(y,"d",t[4])},i:t,o:t,d(t){t&&l(e),t&&l(r),t&&l(o),u(x,t),u($,t),b()}}}function xn(t,n,e){let r,o,i,a,s,l,{plotX:u}=n,{plotY:c}=n;const h={top:20,right:15,bottom:20,left:25};let f=500,d=200;return t.$$set=t=>{"plotX"in t&&e(9,u=t.plotX),"plotY"in t&&e(10,c=t.plotY)},t.$$.update=()=>{512&t.$$.dirty&&e(11,r=u[0]),512&t.$$.dirty&&e(12,o=u[u.length-1]),6145&t.$$.dirty&&e(3,i=pn().domain([r,o]).range([h.left,f-h.right])),2&t.$$.dirty&&e(2,a=pn().domain([0,255]).range([d-h.bottom,h.top])),1536&t.$$.dirty&&e(4,s=function(t,n){let e=0,r=`M${i(t[e])},${a(n[e])}`;for(e=1;e<n.length;e++)r+=`L${i(t[e])},${a(n[e])}`;return r}(u,c)),6172&t.$$.dirty&&e(5,l=`${s}L${i(o)},${a(0)}L${i(r)},${a(0)}Z`)},[f,d,a,i,s,l,[0,50,100,150,200,250],[0,200,400,600,800,1e3],h,u,c,r,o,function(){f=this.clientWidth,d=this.clientHeight,e(0,f),e(1,d)}]}sn=fn({thousands:",",grouping:[3],currency:["$",""]}),ln=sn.format,un=sn.formatPrefix;class Mn extends G{constructor(t){super(),P(this,t,xn,wn,i,{plotX:9,plotY:10})}}function $n(t,n,e){const r=t.slice();return r[11]=n[e],r[13]=e,r}function kn(t,n,e){const r=t.slice();return r[14]=n[e],r[13]=e,r}function Nn(t,n,e){const r=t.slice();return r[14]=n[e],r}function An(t){let n,e,r,o,i,u,c=t[14]+"";return{c(){n=h("g"),e=h("line"),r=h("text"),o=f(c),p(e,"x2","100%"),p(e,"class","svelte-1hpczr2"),p(r,"y","-4"),p(r,"class","svelte-1hpczr2"),p(n,"class",i="tick tick-"+t[14]+" svelte-1hpczr2"),p(n,"transform",u="translate(0, "+t[4](t[14])+")")},m(t,i){s(t,n,i),a(n,e),a(n,r),a(r,o)},p(t,e){16&e&&u!==(u="translate(0, "+t[4](t[14])+")")&&p(n,"transform",u)},d(t){t&&l(n)}}}function Cn(t){let n,e,r,o,i,u=t[14]+"";return{c(){n=h("g"),e=h("text"),r=f(u),p(e,"x",o=t[3]/2),p(e,"y","-4"),p(e,"class","svelte-1hpczr2"),p(n,"class","tick svelte-1hpczr2"),p(n,"transform",i="translate("+t[5](t[13])+","+t[2]+")")},m(t,o){s(t,n,o),a(n,e),a(e,r)},p(t,r){8&r&&o!==(o=t[3]/2)&&p(e,"x",o),36&r&&i!==(i="translate("+t[5](t[13])+","+t[2]+")")&&p(n,"transform",i)},d(t){t&&l(n)}}}function En(t){let n,e,r,o,i;return{c(){n=h("rect"),p(n,"x",e=t[5](t[13])+2),p(n,"y",r=t[4](t[11])),p(n,"width",o=t[3]-4),p(n,"height",i=t[4](0)-t[4](t[11])),p(n,"class","svelte-1hpczr2")},m(t,e){s(t,n,e)},p(t,a){32&a&&e!==(e=t[5](t[13])+2)&&p(n,"x",e),17&a&&r!==(r=t[4](t[11]))&&p(n,"y",r),8&a&&o!==(o=t[3]-4)&&p(n,"width",o),17&a&&i!==(i=t[4](0)-t[4](t[11]))&&p(n,"height",i)},d(t){t&&l(n)}}}function Sn(n){let e,r,o,i,f,g,m,y,b=n[7],v=[];for(let t=0;t<b.length;t+=1)v[t]=An(Nn(n,b,t));let x=n[6],M=[];for(let t=0;t<x.length;t+=1)M[t]=Cn(kn(n,x,t));let $=n[0],k=[];for(let t=0;t<$.length;t+=1)k[t]=En($n(n,$,t));return{c(){e=c("h3"),e.textContent="Chromagram Visualiser",r=d(),o=c("div"),i=h("svg"),f=h("g");for(let t=0;t<v.length;t+=1)v[t].c();g=h("g");for(let t=0;t<M.length;t+=1)M[t].c();m=h("g");for(let t=0;t<k.length;t+=1)k[t].c();p(e,"class","svelte-1hpczr2"),p(f,"class","axis y-axis"),p(g,"class","axis x-axis svelte-1hpczr2"),p(m,"class","bars svelte-1hpczr2"),p(i,"class","svelte-1hpczr2"),p(o,"class","chart svelte-1hpczr2"),E((()=>n[9].call(o)))},m(t,l){s(t,e,l),s(t,r,l),s(t,o,l),a(o,i),a(i,f);for(let t=0;t<v.length;t+=1)v[t].m(f,null);a(i,g);for(let t=0;t<M.length;t+=1)M[t].m(g,null);a(i,m);for(let t=0;t<k.length;t+=1)k[t].m(m,null);y=w(o,n[9].bind(o))},p(t,[n]){if(144&n){let e;for(b=t[7],e=0;e<b.length;e+=1){const r=Nn(t,b,e);v[e]?v[e].p(r,n):(v[e]=An(r),v[e].c(),v[e].m(f,null))}for(;e<v.length;e+=1)v[e].d(1);v.length=b.length}if(108&n){let e;for(x=t[6],e=0;e<x.length;e+=1){const r=kn(t,x,e);M[e]?M[e].p(r,n):(M[e]=Cn(r),M[e].c(),M[e].m(g,null))}for(;e<M.length;e+=1)M[e].d(1);M.length=x.length}if(57&n){let e;for($=t[0],e=0;e<$.length;e+=1){const r=$n(t,$,e);k[e]?k[e].p(r,n):(k[e]=En(r),k[e].c(),k[e].m(m,null))}for(;e<k.length;e+=1)k[e].d(1);k.length=$.length}},i:t,o:t,d(t){t&&l(e),t&&l(r),t&&l(o),u(v,t),u(M,t),u(k,t),y()}}}function zn(t,n,e){let r,o,i,a,{points:s=[0,0,0,0,0,0,0,0,0,0,0,0]}=n;const l=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],u=20,c=15,h=20,f=25;let d=500,g=200;return t.$$set=t=>{"points"in t&&e(0,s=t.points)},t.$$.update=()=>{2&t.$$.dirty&&e(5,r=pn().domain([0,l.length]).range([f,d-c])),4&t.$$.dirty&&e(4,o=pn().domain([0,100]).range([g-h,u])),2&t.$$.dirty&&e(8,i=d-(f+c)),256&t.$$.dirty&&e(3,a=i/l.length)},[s,d,g,a,o,r,l,[0,20,40,60,80],i,function(){d=this.clientWidth,g=this.clientHeight,e(1,d),e(2,g)}]}class qn extends G{constructor(t){super(),P(this,t,zn,Sn,i,{points:0})}}function Fn(t,n,e){t=t.map((t=>Math.sqrt(t)));const r=new Float32Array(12),o=(r,o,i)=>{const a=function(t,n,e,r,o){return Math.round(function(t){return jn*Math.pow(2,t/12)}(t)*n*e/(r/o))}(i,r,o,n,e),s=a-1*o,l=a+1*o;return Math.max(...t.slice(s,l))};for(let t=0;t<12;t++)r[t]=o(1,1,t)+o(2,1,t)+(o(1,2,t)+o(2,2,t))/2;return r}const jn=130.81;const Dn={maj:[1,0,0,0,1,0,0,1,0,0,0,0],maj7:[1,0,0,0,1,0,0,1,0,0,0,1],m:[1,0,0,1,0,0,0,1,0,0,0,0],m7:[1,0,0,1,0,0,0,1,0,0,1,0],7:[1,0,0,0,1,0,0,1,0,0,1,0],dim:[1,0,0,1,0,0,1,0,0,0,0,0]},_n=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function Ln(t,n){return(t%n+n)%n}function Tn(t,n=1){const e=new Int8Array(t.length);for(let r=0;r<e.length;r++)e[r]=t[Ln(r-n,t.length)];return e}const Hn=function(){const t=Object.keys(Dn),n=_n,e={};let r="C";for(const n of t){const t="maj"===n?r:r+n,o=new Uint8Array(Dn[n]),i=o.map((t=>t?0:1)),a=o.reduce(((t,n)=>n?t+1:t));e[t]={bitMask:o,invertedMask:i,nNotes:a}}for(let o=1;o<n.length;o++){r=n[o];for(const n of t){const t="maj"===n?r:r+n,i=Tn(Dn[n],o),a=i.map((t=>t?0:1)),s=i.reduce(((t,n)=>n?t+1:t));e[t]={bitMask:i,invertedMask:a,nNotes:s}}}return e}(),Rn=Object.keys(Hn);function Pn(t){return function(t){let n=t[0];for(let e=1;e<t.length;e++)n+=t[e];return n}(t)/t.length}function Gn(t,n){return Math.sqrt(t.reduce(((t,n)=>{}))/t.length)}function In(t,n=20,e=5,r=.5,o=null){o=o||t.length;const i=[],a=t.slice(0,o),s=new Uint8Array(o),l=new Uint8Array(o),u=t.slice(0,n);var c;s[n-1]=Pn(u),l[n-1]=(Pn(c=u),Math.sqrt(c.reduce(((t,n)=>{}))/c.length));const h=function(t){let n=t[0];for(let e=1;e<t.length;e++)t[e]>n&&(n=t[e]);return n}(t)/3;for(let u=n;u<o;u++){Math.abs(t[u]-s[u-1])>e*l[u-1]?(t[u]>s[u-1]&&t[u]>h&&i.push(u),a[u]=r*t[u]+(1-r)*a[u-1]):a[u]=t[u];const o=a.slice(u-n,u);s[u]=Pn(o),l[u]=Gn(o,s[u])}const f=[];let d=0,g=0;for(let n=1;n<i.length;n++)if(i[n]==i[n-1]+1)g=n;else{if(g===n-1){const n=Math.round((i[g]+i[d])/2);t[n]>h&&f.push(n)}d=n}return f}const Un=new Float32Array([65.41,69.3,73.42,77.78,82.41,87.31,92.5,98,103.83,110,116.54,123.47,130.81,138.59,146.83,155.56,164.81,174.61,185,196,207.65,220,233.08,246.94,261.63,277.18,293.66,311.13,329.63,349.23,369.99,392,415.3,440,466.16,493.88,523.25]),Bn=["C2","C#2","D2","D#2","E2","F2","F#2","G2","G#2","A2","A#2","B2","C3","C#3","D3","D#3","E3","F3","F#3","G3","G#3","A3","A#3","B3","C4","C#4","D4","D#4","E4","F4","F#4","G4","G#4","A4","A#4","B4","C5"],On=t=>{const n=(t=>{let n=0,e=Un.length,r=-1,o=-1;for(;n<e&&(r=Math.round((n+e)/2),r!=o);)t>Un[r]?n=r+1:e=r,o=r;return Un[n]-t>t-Un[n-1]?n-1:n})(t);return Bn[n]};function Wn(n){let e,r,o;return{c(){e=c("button"),e.innerHTML="<b>Start</b>"},m(t,i){s(t,e,i),r||(o=g(e,"click",n[7]),r=!0)},p:t,d(t){t&&l(e),r=!1,o()}}}function Xn(n){let e,r,o;return{c(){e=c("button"),e.innerHTML="<b>Stop</b>"},m(t,i){s(t,e,i),r||(o=g(e,"click",n[7]),r=!0)},p:t,d(t){t&&l(e),r=!1,o()}}}function Yn(t){let n;return{c(){n=c("br")},m(t,e){s(t,n,e)},d(t){t&&l(n)}}}function Vn(t){let n,e,o,i,u,h,y,b,v,w,x,M,$,k,N,A,C,S,z,q,F,j,R,P,G,I,U,B,O,W,X,Y,V=(t[2]?t[2]:"N/A")+"",Z=(t[3]?t[3]:"N/A")+"";function K(t,n){return t[0]?Xn:Wn}E(t[14]);let J=K(t),Q=J(t),tt=t[1]<500&&Yn();return z=new Mn({props:{plotX:t[6],plotY:t[5]}}),F=new qn({props:{points:t[4]}}),{c(){var t,r,a;n=c("main"),e=c("div"),o=c("h1"),o.innerHTML='<a href="https://kwsp.github.io/chord-analyser/">Chord Analyser</a>',i=d(),u=c("p"),u.textContent='Press "Start" to toggle the mic. Try to play a chord on the guitar or\n      piano and see if it got the chords and notes right.',h=d(),Q.c(),y=d(),b=c("span"),v=c("b"),v.textContent="Chord:",w=d(),x=f(V),M=d(),tt&&tt.c(),$=d(),k=c("span"),N=c("b"),N.textContent="Notes:",A=d(),C=f(Z),S=d(),L(z.$$.fragment),q=d(),L(F.$$.fragment),j=d(),R=c("p"),R.innerHTML='This web app listens on the microphone and attempts to figure out the\n      musical chords and notes you are playing on an instrument (e.g. guitar or\n      piano). It first transforms the audio to the frequency domain via FFT with\n      the Web Audio API&#39;s\n      <a href="https://developer.mozilla.org/en-US/docs/Web/API/AnalyserNode">AnalyserNode\n      </a>. To figure out the chords, it calculates the Chromagram from the\n      power spectrum and matches the chromagram to a set of precomputed chord\n      masks<a href="#ref1"><sup>1</sup></a>. To find the specific notes played,\n      it looks for the peaks in the power spectrum and then find the closest\n      chromatic note each peak frequency corresponds to via a binary nearest\n      neighbour search.',P=d(),G=c("p"),G.textContent="All processing is done in the browser and no data is sent anywhere.",I=f("\n\n    References:\n    "),U=c("p"),U.innerHTML='<span id="ref1">1. &quot;Real-Time Chord Recognition For Live Performance&quot;, A. M. Stark and\n        M. D. Plumbley. In Proceedings of the 2009 International Computer Music\n        Conference (ICMC 2009), Montreal, Canada, 16-21 August 2009.</span>',B=d(),O=c("a"),O.textContent="Github",p(b,"class","chordBox svelte-lf0ldx"),t="width",r="8em",b.style.setProperty(t,r,a?"important":""),p(k,"class","notesBox"),p(U,"class","references svelte-lf0ldx"),p(O,"href","https://github.com/kwsp/chord-analyser/"),p(e,"class","container"),p(n,"class","svelte-lf0ldx")},m(r,l){s(r,n,l),a(n,e),a(e,o),a(e,i),a(e,u),a(e,h),Q.m(e,null),a(e,y),a(e,b),a(b,v),a(b,w),a(b,x),a(e,M),tt&&tt.m(e,null),a(e,$),a(e,k),a(k,N),a(k,A),a(k,C),a(e,S),T(z,e,null),a(e,q),T(F,e,null),a(e,j),a(e,R),a(e,P),a(e,G),a(e,I),a(e,U),a(e,B),a(e,O),W=!0,X||(Y=[g(window,"keydown",t[8]),g(window,"resize",t[14])],X=!0)},p(t,[n]){J===(J=K(t))&&Q?Q.p(t,n):(Q.d(1),Q=J(t),Q&&(Q.c(),Q.m(e,y))),(!W||4&n)&&V!==(V=(t[2]?t[2]:"N/A")+"")&&m(x,V),t[1]<500?tt||(tt=Yn(),tt.c(),tt.m(e,$)):tt&&(tt.d(1),tt=null),(!W||8&n)&&Z!==(Z=(t[3]?t[3]:"N/A")+"")&&m(C,Z);const r={};64&n&&(r.plotX=t[6]),32&n&&(r.plotY=t[5]),z.$set(r);const o={};16&n&&(o.points=t[4]),F.$set(o)},i(t){W||(D(z.$$.fragment,t),D(F.$$.fragment,t),W=!0)},o(t){_(z.$$.fragment,t),_(F.$$.fragment,t),W=!1},d(t){t&&l(n),Q.d(),tt&&tt.d(),H(z),H(F),X=!1,r(Y)}}}const Zn=8192;function Kn(t,n,e){let r,o,i,a,s,l,u,c=!1,h="",f="";let d;const g=new Uint8Array(4096);let p=44100;function m(t){const n=new AudioContext;e(9,p=n.sampleRate),console.log(`Sampling frequency: ${p}Hz`);const o=n.createAnalyser();o.fftSize=Zn,o.minDecibels=-70;n.createMediaStreamSource(t).connect(o);const s=()=>{if(!c)return;requestAnimationFrame(s),o.getByteFrequencyData(g),e(5,a=g.subarray(0,i)),e(4,d=Fn(g,p,Zn)),d.reduce(((t,n)=>t+n))>40&&e(2,h=function(t){const n=new Float32Array(Rn.length);for(let e=0;e<Rn.length;e++){const r=Hn[Rn[e]].invertedMask,o=Hn[Rn[e]].nNotes;let i=0;for(let n=0;n<12;n++)i+=r[n]*t[n]*t[n];n[e]=Math.sqrt(i)/(12-o)}const e=function(t){let n=t[0],e=0;for(let r=1;r<t.length;r++)t[r]<n&&(n=t[r],e=r);return e}(n);return Rn[e]}(d));const t=In(g,11,5,.5,i).slice(0,7);e(3,f=[...new Set(t.map((t=>On(t*r))))])};requestAnimationFrame(s)}function y(){c?e(0,c=!1):(e(0,c=!0),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!0}).then(m).catch((function(t){console.log("The following getUserMedia error occurred: "+t)})):console.log("getUserMedia not supported on your browser!"))}return t.$$.update=()=>{512&t.$$.dirty&&e(10,r=p/Zn),1024&t.$$.dirty&&e(13,o=t=>Math.round(t/r)),8192&t.$$.dirty&&e(11,i=o(1e3)),2048&t.$$.dirty&&e(5,a=g.subarray(0,i)),1024&t.$$.dirty&&e(12,s=function(t,n){const e=new Uint16Array(4096);for(let r=0;r<n;r++)e[r]=r*t;return e}(r,g.length)),6144&t.$$.dirty&&e(6,l=s.subarray(0,i))},[c,u,h,f,d,a,l,y,function(t){"KeyA"===t.code&&y()},p,r,i,s,o,function(){e(1,u=window.innerWidth)}]}return new class extends G{constructor(t){super(),P(this,t,Kn,Vn,i,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
